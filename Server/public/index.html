<!DOCTYPE html>
<html>
  <head>
    <title>PicoRico</title>
    <script src="jquery.min.js"></script>
    <script src="d3.min.js"></script>
    <script src="epoch.min.js"></script>
    <link rel="stylesheet" type="text/css" href="epoch.min.css">
  </head>
  <body>
    <div id="gaugeX" class="epoch gauge-small"></div>
    <div id="gaugeY" class="epoch gauge-small"></div>
    <div id="gaugeZ" class="epoch gauge-small"></div>

    <script>
      function format(v) {
        return v;
      }

      function updateGauges() {
        $.get('/data', function(data) {
          if (!data || !data.acc) {
            return;
          }
          var v = data.acc[data.acc.length - 1];
          gaugeX.push(v.value.x);
          gaugeY.push(v.value.y);
          gaugeZ.push(v.value.z);
        })
      }

      var gaugeX = $('#gaugeX').epoch({
        type: 'time.gauge',
        domain: [-90, 90],
        value: 0,
        format: format
      });

      var gaugeY = $('#gaugeY').epoch({
        type: 'time.gauge',
        domain: [-90, 90],
        value: 0,
        format: format
      });

      var gaugeZ = $('#gaugeZ').epoch({
        type: 'time.gauge',
        domain: [-90, 90],
        value: 0,
        format: format
      });

      setInterval(updateGauges, 500);
    </script>
  </body>
</html>
